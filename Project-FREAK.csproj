<Project Sdk="Microsoft.NET.Sdk.WindowsDesktop">

  <!-- 1) Default for ALL OSes: only build a plain net8.0 library -->
  <PropertyGroup>
    <!-- plain library target so CI”s Linux restore/build succeeds -->
    <TargetFramework>net8.0</TargetFramework>

    <Nullable>enable</Nullable>
    <ImplicitUsings>enable</ImplicitUsings>

    <!-- never compile your Tests folder into the app -->
    <DefaultItemExcludes>$(DefaultItemExcludes);Tests\**\*</DefaultItemExcludes>
  </PropertyGroup>

  <!-- 2) Only when running on Windows do we layer on the WPF/TFM -->
  <PropertyGroup Condition="'$(OS)'=='Windows_NT'">
    <!-- add the windows WPF target (in addition to net8.0) -->
    <TargetFrameworks>net8.0-windows7.0;net8.0</TargetFrameworks>

    <!-- enable WPF and allow Windows targeting -->
    <UseWPF>true</UseWPF>
    <EnableWindowsTargeting>true</EnableWindowsTargeting>
  </PropertyGroup>

  <!-- 3) Your runtime deps -->
  <ItemGroup>
    <PackageReference Include="OpenCvSharp4"               Version="4.10.0.20241108" />
    <PackageReference Include="OpenCvSharp4.Extensions"    Version="4.10.0.20241108" />
    <PackageReference Include="OpenCvSharp4.runtime.win"   Version="4.10.0.20241108" />
    <PackageReference Include="OpenCvSharp4.WpfExtensions" Version="4.10.0.20241108" />
    <PackageReference Include="System.Drawing.Common"      Version="9.0.3" />
    <PackageReference Include="ScottPlot.Wpf"              Version="5.0.55" />
  </ItemGroup>

  <ItemGroup>
    <Reference Include="LabJack.LJM" />
    <Content   Include="Assets\FONTS\*.ttf">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>
    <Content   Include="Assets\LIBRARIES\LabJack.LJM.dll">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>
    <Resource  Include="Assets\LOGOS\*.png" />
  </ItemGroup>
</Project>
